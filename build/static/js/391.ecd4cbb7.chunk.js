"use strict";(self.webpackChunkmern_media_web_app=self.webpackChunkmern_media_web_app||[]).push([[391],{9310:function(e,s,n){n.d(s,{Z:function(){return b}});var t=n(2791),l=n(364),i=n(885),o=n(9271),r=n(1523),a=n(2426),c=n.n(a),d=n(6094),u=n(850),m=n(8787),v=(0,n(8499).Z)(t.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4H8c-1.1 0-1.99.9-1.99 2L6 21c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V11l-6-6zM8 21V7h6v5h5v9H8z"}),"FileCopyOutlined"),x=n(3402),h=n(6953),f=n(7361);var p=function(e,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,l=(0,t.useState)(0),o=(0,i.Z)(l,2),r=o[0],a=o[1];return(0,t.useEffect)((function(){var t=setTimeout((function(){1===r&&e(),a(0)}),n);return 2===r&&s(),function(){return clearTimeout(t)}}),[r]),function(){return a((function(e){return e+1}))}},j=n(184),N=function(e){var s,n,l,a=e.post,N=e.user,g=(0,t.useState)(a.likes.length),b=(0,i.Z)(g,2),w=b[0],Z=b[1],k=(0,t.useState)(!1),C=(0,i.Z)(k,2),I=C[0],y=C[1],F=(0,o.k6)();(0,t.useEffect)((function(){y(a.likes.includes(N.userId))}),[N.userId,a.likes]);var S=function(){try{h.F.put("/posts/like",{postId:a._id},{headers:{Authorization:"Bearer ".concat(N.accessToken)}})}catch(e){}Z((function(e){return I?e-1:e+1})),y((function(e){return!e}))},_=p((function(){return F.push("/postdetails/".concat(a._id))}),S);return(0,j.jsxs)("div",{className:"mt-2 rounded-lg bg-white border border-gray-100 py-2.5",children:[(0,j.jsx)("div",{className:"px-3",children:(0,j.jsxs)(r.rU,{to:"/profile/".concat(null===a||void 0===a||null===(s=a.user)||void 0===s?void 0:s._id),className:"flex gap-2.5 pb-2",children:[(0,j.jsx)("div",{children:(0,j.jsx)("img",{className:"h-10 w-10 object-cover rounded-full",src:(null===a||void 0===a||null===(n=a.user)||void 0===n?void 0:n.profilepicture)||f.tU,alt:""})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{children:null===a||void 0===a||null===(l=a.user)||void 0===l?void 0:l.username}),(0,j.jsx)("div",{className:"text-darkGray-10 text-xs",children:c()(a.createdAt).fromNow()})]})]})}),(0,j.jsxs)("div",{onClick:_,children:[(0,j.jsx)("div",{children:a.photo&&(0,j.jsx)("img",{className:"md:max-h-92.5 max-h-77.5 w-full",src:a.photo,alt:""})}),(0,j.jsxs)("div",{className:"md:px-6 px-4",children:[(0,j.jsx)("div",{className:"mt-2 md:text-3xl text-xl font-medium",children:null===a||void 0===a?void 0:a.title}),(0,j.jsx)("div",{className:"text-black mt-2 mb-2 trucate-word",children:null===a||void 0===a?void 0:a.description})]})]}),(0,j.jsxs)("div",{className:"flex items-center justify-between md:px-6 px-4",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsxs)("button",{onClick:S,className:"flex cursor-pointer items-center",children:[I?(0,j.jsx)(d.Z,{style:{color:"red"}}):(0,j.jsx)(u.Z,{}),(0,j.jsx)("span",{children:w})]}),(0,j.jsx)(r.rU,{to:"/postdetails/".concat(a._id),children:(0,j.jsx)(m.Z,{})})]}),(0,j.jsx)("button",{onClick:function(){navigator.clipboard.writeText("".concat(window.origin,"/postdetails/").concat(a._id)),x.ZP.success("Copied!",{position:"top-right"})},className:"",children:(0,j.jsx)(v,{})})]})]})},g=n(5489);var b=function(e){var s=e.posts,n=e.NoLink,t=(0,l.v9)((function(e){return e.user}));return(0,j.jsxs)("div",{className:"mt-1 flex-[6.5] md:px-0 mb-7 px-2 min-h-screen",children:[!n&&(0,j.jsx)(g.Z,{}),s.map((function(e,s){return!!e&&(0,j.jsx)(N,{user:t,post:e},s)}))]})}},5489:function(e,s,n){n.d(s,{Z:function(){return i}});n(2791);var t=n(1523),l=n(184);function i(){return(0,l.jsxs)("div",{className:"mt-3 mb-2 flex gap-2",children:[(0,l.jsx)(t.OL,{className:"ml-2 text-black-0 py-1 px2",exact:!0,to:"/",activeClassName:"font-black",children:"Posts"}),(0,l.jsx)(t.OL,{className:"ml-2 text-black-0 py-1 px2",to:"/feeds",activeClassName:"font-black",children:"Feeds"})]})}},220:function(e,s,n){n.d(s,{Z:function(){return j}});var t=n(1523),l=n(7510),i=n(2037),o=n(4900),r=n(9628),a=n(963),c=n(6274),d=n(4861),u=n(2279),m=n(9799),v=n(9547),x=n(5449),h=n(184),f=[{name:"Create Post",to:"/write",Icon:l.Z},{name:"Home",to:"/",Icon:i.Z},{name:"Chats",to:"/chat",Icon:o.Z},{name:"Questions",to:"/contact",Icon:r.Z},{name:"Sign In/Up",to:"/login",Icon:a.Z},{name:"About",to:"/about",Icon:c.Z},{name:"Contact",to:"/contact",Icon:d.Z}],p=[{to:"https://twitter.com/SRK_R_?t=58WfgjgrqabaZrXWBHTZkg&s=08",Icon:u.Z},{to:"https://github.com/SRK-prog/",Icon:m.Z},{to:"https://www.linkedin.com/in/sivaramakrishnan-r262/",Icon:v.Z},{to:"https://www.instagram.com/siva.r12/",Icon:x.Z}];function j(){return(0,h.jsx)("div",{className:"h-screen-cal-55 top-[55px] flex-[3] sticky overflow-y-auto bg-gray-70 sidebar-scrollbar md:block hidden",children:(0,h.jsxs)("div",{className:"p-4",children:[(0,h.jsx)("ul",{className:"flex flex-col gap-2 font-medium text-gray-80",children:f.map((function(e,s){var n=e.name,l=e.Icon,i=e.to;return(0,h.jsxs)(t.rU,{to:i,className:"flex items-center duration-200 px-3 py-2.5 rounded gap-4 hover:bg-lightBlue-10 hover:text-blue-20",children:[(0,h.jsx)(l,{}),(0,h.jsx)("span",{children:n})]},s)}))}),(0,h.jsx)("div",{className:"flex mt-5 gap-1 mb-2 items-center justify-center",children:p.map((function(e,s){var n=e.Icon,t=e.to;return(0,h.jsx)("a",{target:"_blank",rel:"noreferrer",href:t,children:(0,h.jsx)(n,{className:"text-3xl text-gray-90 hover:text-[#353434]"})},s)}))}),(0,h.jsx)("hr",{className:"py-5"})]})})}},3391:function(e,s,n){n.r(s),n.d(s,{default:function(){return w}});var t=n(4165),l=n(5861),i=n(885),o=n(2791),r=n(8499),a=(0,r.Z)(o.createElement("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}),"Room"),c=(0,r.Z)(o.createElement(o.Fragment,null,o.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),o.createElement("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})),"Schedule"),d=n(9271),u=n(1523),m=n(364),v=n(220),x=n(7361),h=n(6953),f=n(9310),p=n(3436),j=n(3877),N=n(184),g=function(e){var s=e.data,n=(0,d.k6)();return(0,N.jsxs)("div",{onClick:function(){return n.push("/profile/".concat(null===s||void 0===s?void 0:s._id))},className:"flex p-2.5 cursor-pointer bg-white mb-1 mx-1",children:[(0,N.jsx)("img",{className:"w-10 h-10 object-cover mr-5 rounded-full",src:(null===s||void 0===s?void 0:s.profilepicture)||x.tU,alt:""}),(0,N.jsx)("div",{className:"font-medium",children:(0,N.jsx)("div",{children:null===s||void 0===s?void 0:s.username})})]})},b=function(e){var s=e.type,n=e.userId,r=e.onClose,a=(0,o.useState)(!0),c=(0,i.Z)(a,2),d=c[0],u=c[1],m=(0,o.useState)([]),v=(0,i.Z)(m,2),x=v[0],f=v[1];return(0,o.useEffect)((function(){(0,l.Z)((0,t.Z)().mark((function e(){var l,i,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s){e.next=3;break}return e.abrupt("return");case 3:return l="get-"+s.toLowerCase(),u(!0),e.next=7,h.F.get("/users/"+l,{params:{userId:n}});case 7:i=e.sent,null!==(o=i.data)&&void 0!==o&&o.response&&f(null===o||void 0===o?void 0:o.response),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),f([]),console.log(e.t0);case 16:return e.prev=16,u(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,12,16,19]])})))()}),[s,n]),d?(0,N.jsx)(p.Z,{}):(0,N.jsxs)("div",{className:"h-full",children:[(0,N.jsxs)("div",{className:"flex justify-between md:mt-10 mt-5 md:mb-2 mb-3 mx-4",children:[(0,N.jsx)("button",{onClick:function(){return r(null)},children:(0,N.jsx)(j.Z,{})}),(0,N.jsx)("div",{className:"text-center font-bold text-xl capitalize",children:null===s||void 0===s?void 0:s.toLowerCase()})]}),x.map((function(e){return(0,N.jsx)(g,{data:e},null===e||void 0===e?void 0:e._id)}))]})};function w(){var e,s=(0,m.v9)((function(e){return e.user})),n=(0,o.useState)({}),r=(0,i.Z)(n,2),j=r[0],g=r[1],w=(0,o.useState)(0),Z=(0,i.Z)(w,2),k=Z[0],C=Z[1],I=(0,o.useState)(!1),y=(0,i.Z)(I,2),F=y[0],S=y[1],_=(0,o.useState)([]),z=(0,i.Z)(_,2),L=z[0],E=z[1],M=(0,o.useState)(!0),P=(0,i.Z)(M,2),B=P[0],H=P[1],U=(0,o.useState)(null),A=(0,i.Z)(U,2),O=A[0],T=A[1],R=(0,d.TH)().pathname.split("/")[2],V=(0,d.k6)(),W=(0,o.useRef)(null),D=function(e){return window.scrollTo(0,e.current.offsetTop)};(0,o.useEffect)((function(){document.title=null!==j&&void 0!==j&&j.username?"Profile | ".concat(null===j||void 0===j?void 0:j.username):"Profile"}),[null===j||void 0===j?void 0:j.username]);var J=function(e){T((function(s){return s===e?null:e}))},G=function(){try{h.F.put("/users/profile/follow",{profileId:null===j||void 0===j?void 0:j._id},{headers:{Authorization:"Bearer ".concat(s.accessToken)}})}catch(e){console.log("follow feature error: ",e)}C((function(e){return F?e-1:e+1})),S((function(e){return!e}))};(0,o.useEffect)((function(){(0,l.Z)((0,t.Z)().mark((function e(){var n,l,o,r,a,c,d,u,m,v,x,f;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(""),H(!0),e.prev=2,"username email profilepicture followers followings createdAt lastSeen",e.next=6,Promise.all([h.F.get("/users",{params:{userId:R,select:"username email profilepicture followers followings createdAt lastSeen"}}),h.F.get("/posts/profile",{params:{userId:R}}).catch((function(e){404===e.response.status&&E([])}))]);case 6:m=e.sent,v=(0,i.Z)(m,2),x=v[0],(f=v[1])&&E((null===(n=f.data)||void 0===n?void 0:n.response)||[]),g(null===(l=x.data)||void 0===l?void 0:l.response),C(null===(o=x.data)||void 0===o||null===(r=o.response)||void 0===r||null===(a=r.followers)||void 0===a?void 0:a.length),S(null===(c=x.data)||void 0===c||null===(d=c.response)||void 0===d||null===(u=d.followers)||void 0===u?void 0:u.includes(s.userId)),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),V.push("/error404"),console.log("profile error: ",e.t0);case 20:return e.prev=20,H(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[2,16,20,23]])})))()}),[R,s.userId]);var K=function(){var e;return null===j||void 0===j||null===(e=j.followings)||void 0===e?void 0:e.includes(s.userId)};return(0,N.jsxs)("div",{className:"flex max-w-360 mx-auto relative",children:[(0,N.jsx)("div",{className:"flex-[2] md:block hidden",children:(0,N.jsx)(v.Z,{})}),B&&(0,N.jsx)("div",{className:"flex-[6.5]",children:(0,N.jsx)(p.Z,{})}),!B&&(0,N.jsxs)("div",{className:"relative bg-gray-130 min-h-screen-cal-55 ".concat(O?"flex-[4.5]":"flex-[6.5]"),children:[(0,N.jsx)("div",{className:"h-24 bg-gray-140"}),(0,N.jsxs)("div",{children:[(0,N.jsx)("img",{className:"ProfileImage",src:(null===j||void 0===j?void 0:j.profilepicture)||x.Xm,alt:""}),(null===j||void 0===j?void 0:j.description)&&(0,N.jsx)("div",{style:{height:"25px"}}),(null===j||void 0===j?void 0:j.city)&&(0,N.jsx)("div",{style:{height:"25px"}}),(0,N.jsxs)("div",{className:"ProfileDetails",children:[(0,N.jsxs)("div",{className:"FollowFlex",children:[(0,N.jsx)("span",{className:"FollowFlexBox"}),(0,N.jsxs)("span",{className:"FollowCounts",children:[(0,N.jsxs)("span",{onClick:function(){return D(W)},className:"Follows cursor-pointer",children:[(0,N.jsx)("div",{className:"text-semibold text-lg",children:"Posts"}),(0,N.jsx)("div",{className:"text-base",children:L.length})]}),(0,N.jsxs)("button",{onClick:function(){k&&J("FOLLOWERS")},className:"Follows",children:[(0,N.jsx)("div",{className:"text-semibold text-lg",children:"Followers"}),(0,N.jsx)("div",{className:"text-base",children:k})]}),(0,N.jsxs)("button",{onClick:function(){var e;null!==j&&void 0!==j&&null!==(e=j.followings)&&void 0!==e&&e.length&&J("FOLLOWINGS")},className:"Follows",children:[(0,N.jsx)("div",{className:"text-semibold text-lg",children:"Following"}),(0,N.jsx)("div",{className:"text-base",children:(null===j||void 0===j||null===(e=j.followings)||void 0===e?void 0:e.length)||0})]})]})]}),(0,N.jsxs)("div",{className:"UserInfo",children:[(0,N.jsxs)("div",{className:"UserName",children:[(0,N.jsx)("h2",{children:null===j||void 0===j?void 0:j.username}),(0,N.jsxs)("p",{children:["@",null===j||void 0===j?void 0:j.username]})]}),(0,N.jsx)("div",{className:"BtnWrper",children:(null===j||void 0===j?void 0:j._id)!==(null===s||void 0===s?void 0:s.userId)&&(0,N.jsxs)("div",{className:"BtnSection",children:[(0,N.jsx)("div",{className:"FollowBtn",children:(0,N.jsx)("div",{children:F?(0,N.jsx)("button",{className:"followingbutton",onClick:G,children:"Following"}):(0,N.jsx)("button",{className:K()?"followbackbutton":"followbutton",onClick:G,children:K()?"Follow back":"Follow"})})}),(F||K())&&(0,N.jsx)("div",{className:"FollowBtn",children:(0,N.jsx)(u.rU,{to:"/chat",className:"LinkBtn text-white",children:"Messege"})})]})})]}),(0,N.jsx)("div",{className:"DescContainer",children:(null===j||void 0===j?void 0:j.description)&&(0,N.jsx)("div",{className:"UserAbout",children:null===j||void 0===j?void 0:j.description})}),(0,N.jsxs)("div",{className:"JoinDate",children:[(null===j||void 0===j?void 0:j.city)&&(0,N.jsxs)("span",{className:"JoinItems",children:[(0,N.jsx)(a,{className:"mr-2"})," ",null===j||void 0===j?void 0:j.city]}),(0,N.jsxs)("span",{className:"JoinItems",children:[(0,N.jsx)(c,{className:"mr-2"}),new Date(null===j||void 0===j?void 0:j.createdAt).toDateString()]})]})]})]}),(0,N.jsx)("div",{className:"ProfilePostWrapper",children:(0,N.jsx)("div",{ref:W,className:"ProfilePosts",children:!(null===L||void 0===L||!L.length)&&(0,N.jsx)(f.Z,{NoLink:!0,posts:L})})})]}),(0,N.jsx)("div",{className:"md:flex-[2]  bg-gray-130 md:static w-full min-h-full absolute z-50 ".concat(!O&&"hidden"),children:(0,N.jsx)(b,{onClose:T,type:O,userId:null===j||void 0===j?void 0:j._id})})]})}},3877:function(e,s,n){var t=n(2791),l=n(8499);s.Z=(0,l.Z)(t.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack")},6094:function(e,s,n){var t=n(2791),l=n(8499);s.Z=(0,l.Z)(t.createElement("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite")},850:function(e,s,n){var t=n(2791),l=n(8499);s.Z=(0,l.Z)(t.createElement("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorderOutlined")},8787:function(e,s,n){var t=n(2791),l=n(8499);s.Z=(0,l.Z)(t.createElement("path",{d:"M20 17.17L18.83 16H4V4h16v13.17zM20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2z"}),"ModeCommentOutlined")}}]);
//# sourceMappingURL=391.ecd4cbb7.chunk.js.map